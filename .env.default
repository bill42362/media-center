# ===========================================
# Media Center Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to git

# -------------------------------------------
# Server Configuration
# -------------------------------------------
NODE_ENV=production
PORT=3000
FRONTEND_URL=http://192.168.50.100:8080

# -------------------------------------------
# Database (PostgreSQL)
# -------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=media_center
POSTGRES_USER=media_user
POSTGRES_PASSWORD=CHANGE_ME_IN_PRODUCTION

# Database URL for Prisma
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?schema=public

# -------------------------------------------
# Redis Cache
# -------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}

# -------------------------------------------
# Authentication
# -------------------------------------------
# JWT Secret (MUST change in production)
JWT_SECRET=CHANGE_ME_IN_PRODUCTION_USE_RANDOM_STRING
JWT_EXPIRES_IN=7d

# Admin and allowed users
ADMIN_EMAIL=your-email@gmail.com
ALLOWED_EMAILS=friend@gmail.com,family@gmail.com

# User limits
USER_FAVORITES_LIMIT=100

# -------------------------------------------
# Email (Gmail SMTP for OTP)
# -------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-gmail-app-password
SMTP_FROM=Media Center <your-email@gmail.com>

# OTP Configuration
OTP_EXPIRES_IN=10m
OTP_LENGTH=6

# -------------------------------------------
# Media Paths (NAS)
# -------------------------------------------
# Multiple media sources (comma-separated)
# These paths will be scanned for media files
VIDEO_SOURCES=/volume1/media/videos,/volume1/downloads/movies
IMAGE_SOURCES=/volume1/media/images,/volume1/family/photos
ARTICLE_SOURCES=/volume1/media/articles

# Transcoded files storage (permanent)
TRANSCODED_PATH=/volume1/transcoded

# Cache path (ramdisk for non-favorite videos)
CACHE_PATH=/ramdisk/cache

# Ramdisk configuration
RAMDISK_SIZE=6G

# -------------------------------------------
# HLS Streaming Configuration
# -------------------------------------------
HLS_SEGMENT_DURATION=4
HLS_PLAYLIST_TYPE=vod

# AES-128 Encryption
AES_KEY_ROTATION_INTERVAL=3600

# -------------------------------------------
# FFmpeg Configuration
# -------------------------------------------
FFMPEG_THREADS=4
FFMPEG_PRESET=medium

# GOP (Group of Pictures) for HLS
FFMPEG_GOP_SIZE=2

# -------------------------------------------
# ABR (Adaptive Bitrate) Settings
# -------------------------------------------
# 1080p settings
ABR_1080P_BITRATE=5000k
ABR_1080P_MAXRATE=5500k
ABR_1080P_BUFSIZE=10000k

# 720p settings
ABR_720P_BITRATE=3000k
ABR_720P_MAXRATE=3300k
ABR_720P_BUFSIZE=6000k

# -------------------------------------------
# Transcoding Strategy
# -------------------------------------------
# Auto-transcode when added to favorites
FAVORITE_AUTO_TRANSCODE=true

# Maximum cached videos in ramdisk (LRU)
CACHE_MAX_VIDEOS=64

# Cache cleanup interval (seconds)
CACHE_CLEANUP_INTERVAL=86400

# Concurrent transcode jobs
MAX_CONCURRENT_TRANSCODE=2

# -------------------------------------------
# Caddy Reverse Proxy
# -------------------------------------------
CADDY_PORT=8080
DOMAIN=media.local

# -------------------------------------------
# Development Settings
# -------------------------------------------
# Set to true to enable GraphQL Playground
GRAPHQL_PLAYGROUND=false

# Enable detailed logging
DEBUG=false

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://192.168.50.100:8080
